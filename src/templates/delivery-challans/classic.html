<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DELIVERY CHALLAN</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 12px;
      margin: 10px;
      color: #000;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    td, th {
      border: 1px solid #000;
      padding: 6px;
      vertical-align: top;
    }
    .no-border td {
      border: none;
    }
    .bold { font-weight: bold; }
    .center { text-align: center; }
    .right { text-align: right; }
    .small { font-size: 10px; }
    .header-row {
      font-size: 11px;
    }
    .blue-header {
      background-color: #d4e8fd;
    }
  </style>
</head>
<body>

<!-- TOP HEADER -->
<table class="no-border header-row">
  <tr>
    <td style="width: 100%;">Thank-you for doing business with us</td>
  </tr>
</table>

<!-- SELLER BLOCK -->
<table>
  <tr>
    <td class="center">
      <div class="bold" style="font-size:14px;">{{seller.firmName}}</div>
      {{#if seller.address}}
        {{seller.address.street}}, {{seller.address.city}}, {{seller.address.state}}, {{seller.address.pincode}}<br>
      {{/if}}
      GSTIN : {{seller.gstNumber}}
      {{#if seller.stateCode}}
        &nbsp;&nbsp; State Code : {{seller.stateCode}}
      {{/if}}
    </td>
  </tr>
</table>

<!-- TITLE HEADER -->
<table>
  <tr>
    <td class="center blue-header bold" style="font-size:16px; position: relative;">
      DELIVERY CHALLAN
      <span style="position: absolute; right: 10px; font-size: 11px; font-style: italic; font-weight: normal;">Original For Recipient</span>
    </td>
  </tr>
</table>

<!-- CHALLAN / TRANSPORT META (3 columns) -->
<table>
  <tr>
    <td style="width: 30%;">
      Challan Number<br><b>{{challan.challanNumber}}</b>
    </td>
    <td style="width: 40%;">
      Date Of Supply<br><b>{{formatDate challan.transportInfo.dateOfSupply}}</b>
    </td>
    <td style="width: 30%;">
      Vehicle Number<br><b>{{challan.transportInfo.vehicleNumber}}</b>
    </td>
  </tr>
  <tr>
    <td>
      Challan Date<br><b>{{formatDate challan.challanDate}}</b>
    </td>
    <td>
      Place of Supply<br><b>{{challan.transportInfo.placeOfSupplyStateName}}</b>
    </td>
    <td>
      Transporter ID<br><b>{{challan.transportInfo.transporterId}}</b>
    </td>
  </tr>
  <tr>
    <td>
      State<br><b>{{seller.address.state}}</b>
    </td>
    <td></td>
    <td>
      Transporter Name<br><b>{{challan.transportInfo.transporterName}}</b>
    </td>
  </tr>
  <tr>
    <td>
      Reverse Charge<br><b>{{#if challan.otherDetails.reverseCharge}}Yes{{else}}No{{/if}}</b>
    </td>
    <td></td>
    <td>
      Transportation Mode<br><b>{{challan.transportInfo.mode}}</b>
    </td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td>
      LR Number<br><b>{{challan.transportInfo.docNo}}</b>
    </td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td>
      LR Date<br><b>{{formatDate challan.transportInfo.docDate}}</b>
    </td>
  </tr>
</table>

<!-- RECEIVER / CONSIGNEE -->
<table>
  <tr>
    <td class="bold blue-header" style="width: 50%;">Details of Receiver | Billed to</td>
    <td class="bold blue-header" style="width: 50%;">Details of Consignee | Shipped to</td>
  </tr>
  <tr>
    <td style="width: 50%;">
      Name:&nbsp;&nbsp; <b>{{challan.buyerName}}</b><br>
      Address: {{buyerAddress}}<br>
      GSTIN: {{challan.buyerGstin}}
      {{#if challan.transportInfo.placeOfSupplyStateCode}}
        &nbsp;&nbsp; State Code : {{challan.transportInfo.placeOfSupplyStateCode}}
      {{/if}}<br>
      State:&nbsp;&nbsp; {{challan.transportInfo.placeOfSupplyStateName}}
    </td>
    <td style="width: 50%;">
      {{#if showShippingAddress}}
        Name:&nbsp;&nbsp; <b>{{shippingName}}</b><br>
        Address: {{shippingAddress}}<br>
        GSTIN: {{shippingGstin}}
        {{#if challan.transportInfo.placeOfSupplyStateCode}}
          &nbsp;&nbsp; State Code : {{challan.transportInfo.placeOfSupplyStateCode}}
        {{/if}}<br>
        State:&nbsp;&nbsp; {{challan.transportInfo.placeOfSupplyStateName}}
      {{else}}
        <span class="small">Same as billed to</span>
      {{/if}}
    </td>
  </tr>
</table>

<!-- ITEMS TABLE -->
<table>
  <tr class="bold">
    <th style="width: 8%;">Sr. No.</th>
    <th style="width: 30%;">Name of Product</th>
    <th style="width: 12%;">HSN/SAC</th>
    <th style="width: 12%;">QTY</th>
    <th style="width: 10%;">Unit</th>
    <th style="width: 13%;">Rate</th>
    <th style="width: 15%;">Total</th>
  </tr>

  {{#each totals.items as |item index|}}
    <tr>
      <td class="center">{{inc index}}</td>
      <td class="bold">{{item.itemName}}</td>
      <td class="center">{{item.hsnSac}}</td>
      <td class="right">{{item.quantity}}</td>
      <td></td>
      <td class="right">{{formatCurrency item.unitPrice}}</td>
      <td class="right bold">‚Çπ {{formatCurrency item.totals.lineTotal}}</td>
    </tr>
  {{/each}}

  {{#if totals.additionalCharges.length}}
    {{#each totals.additionalCharges as |c|}}
      <tr>
        <td colspan="6" class="right">{{c.name}}</td>
        <td class="right bold">‚Çπ {{formatCurrency c.totals.total}}</td>
      </tr>
    {{/each}}
  {{/if}}

  <tr class="bold">
    <td colspan="3" class="center">Total</td>
    <td class="right">{{#if totals.items.length}}{{totals.items.[0].quantity}}{{#each totals.items}}{{#if @index}} + {{this.quantity}}{{/if}}{{/each}}{{/if}}</td>
    <td colspan="2"></td>
    <td class="right">‚Çπ {{formatCurrency totals.summary.grandTotal}}</td>
  </tr>
</table>

<!-- AMOUNT IN WORDS + BANK + FINAL AMOUNTS -->
<table>
  <tr>
    <td style="width: 50%; vertical-align: top;">
      <div class="bold">Total Invoice Amount in words</div>
      {{numberToWords totals.summary.grandTotal}} /-
    </td>
    <td style="width: 50%; vertical-align: top;">
      <table style="width: 100%; border: none;">
        <tr>
          <td style="border: none; padding: 0;"><span class="bold">Final Invoice Amount</span></td>
          <td style="border: none; padding: 0;" class="right bold">‚Çπ {{formatCurrency totals.summary.grandTotal}}</td>
        </tr>
        <tr>
          <td style="border: none; padding: 0;"><span class="bold">Balance Due</span></td>
          <td style="border: none; padding: 0;" class="right bold">‚Çπ {{formatCurrency totals.summary.grandTotal}}</td>
        </tr>
      </table>
    </td>
  </tr>
</table>

<!-- BANK DETAILS SECTION -->
<table>
  <tr>
    <td>
      <div class="bold" style="color: #1C6FBD;">üè¶ Bank and Payment Details</div><br>
      {{#if hasBankDetails}}
        {{#if bankDetails.accountHolderName}}Account Name&nbsp;&nbsp;&nbsp;&nbsp; {{bankDetails.accountHolderName}}<br>{{/if}}
        {{#if bankDetails.accountNumber}}Account No.&nbsp;&nbsp;&nbsp;&nbsp; {{bankDetails.accountNumber}}<br>{{/if}}
        {{#if bankDetails.ifscCode}}IFSC Code&nbsp;&nbsp;&nbsp;&nbsp; {{bankDetails.ifscCode}}<br>{{/if}}
        {{#if bankDetails.bankName}}Bank Name&nbsp;&nbsp;&nbsp;&nbsp; {{bankDetails.bankName}}<br>{{/if}}
        {{#if bankDetails.branch}}Branch Name&nbsp;&nbsp;&nbsp;&nbsp; {{bankDetails.branch}}{{/if}}
      {{/if}}
    </td>
  </tr>
</table>

<!-- TERMS + SIGNATURE -->
<table>
  <tr>
    <td style="width: 60%; vertical-align: top;">
      <div class="bold">Terms And Conditions</div>
      <div class="small">
        {{#if termsAndConditions.length}}
          {{#each termsAndConditions}}
            {{inc @index}}. {{this}}<br>
          {{/each}}
        {{else}}
          1. This is an electronically generated document. 2. All disputes are subject to seller city jurisdiction.
        {{/if}}
      </div>
      <br>
      <div class="small">
        Certified that the particular given above are true and correct
      </div>
    </td>
    <td style="width: 40%; text-align: right; vertical-align: top;">
      <div class="bold">For, {{seller.firmName}}</div>
      <br><br>
      {{#if challan.stampUrl}}
        <img src="{{challan.stampUrl}}" alt="Stamp" style="max-height:60px; max-width:120px;" /><br>
      {{/if}}
      {{#if challan.signatureUrl}}
        <img src="{{challan.signatureUrl}}" alt="Signature" style="max-height:50px; max-width:180px;" /><br>
      {{/if}}
      <br><br>
      Authorised Signatory
    </td>
  </tr>
</table>

<!-- FOOTER -->
<table class="no-border">
  <tr>
    <td class="center">Thankyou for your business</td>
  </tr>
</table>

</body>
</html>
